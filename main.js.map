{"version":3,"file":"main.js","mappings":"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","sources":["webpack://3-event-handling/./src/js/generator.js","webpack://3-event-handling/./src/js/GamePlay.js","webpack://3-event-handling/./src/js/GameController.js","webpack://3-event-handling/./src/js/GameState.js","webpack://3-event-handling/./src/js/app.js","webpack://3-event-handling/./src/index.js"],"sourcesContent":["export function cellsGenerator(count) {\n  while (true) {\n    return Math.floor(Math.random() * count);\n  }\n}\n","import { cellsGenerator } from \"./generator\";\n\nexport default class GamePlay {\n  constructor() {\n    this.boardSize = 4;\n    this.container = null;\n    this.boardEl = null;\n    this.cells = [];\n    this.cellClickListeners = []; //\n    this.cellEnterListeners = [];\n    this.cellLeaveListeners = [];\n  }\n\n  bindToDOM(container) {\n    if (!(container instanceof HTMLElement)) {\n      throw new Error(\"container is not HTMLElement\");\n    }\n    this.container = container;\n  }\n\n  drawUi() {\n    this.container.innerHTML = `\n      <div class=\"board-container\">\n        \n      </div>\n      <div class=\"scores\">\n        <span>Количество баллов:</span>\n        <span class=\"count-scores\">0</span>\n      </div>\n      <div class=\"pass\">\n        <span>Количество промахов:</span>\n        <span class=\"count-pass\">0</span>\n      </div>\n      <div class=\"pass\">\n        <span>Количество пропусков:</span>\n        <span class=\"count-skip\">0</span>\n      </div>\n    `;\n\n    this.boardEl = this.container.querySelector(\".board-container\");\n\n    for (let i = 0; i < this.boardSize ** 2; i += 1) {\n      const cellEl = document.createElement(\"div\");\n      cellEl.classList.add(\"cell\");\n      cellEl.addEventListener(\"mouseenter\", (event) => this.onCellEnter(event));\n      cellEl.addEventListener(\"mouseleave\", (event) => this.onCellLeave(event));\n      cellEl.addEventListener(\"click\", (event) => this.onCellClick(event));\n      cellEl.addEventListener(\"mousemove\", (event) => this.onMouseMove(event));\n      this.boardEl.appendChild(cellEl);\n    }\n\n    this.cells = Array.from(this.boardEl.children);\n  }\n\n  draw() {\n    for (let i = 0; i < this.cells.length; i++) {\n      this.cells[i].classList.remove(\"goblin\");\n    }\n    const count = cellsGenerator(this.cells.length);\n    this.cells[count].classList.add(\"goblin\");\n  }\n\n  addCellEnterListener(callback) {\n    this.cellEnterListeners.push(callback);\n  }\n\n  addCellLeaveListener(callback) {\n    this.cellLeaveListeners.push(callback);\n  }\n\n  addCellClickListener(callback) {\n    this.cellClickListeners.push(callback);\n  }\n\n  onCellEnter(event) {\n    event.preventDefault();\n    const index = this.cells.indexOf(event.currentTarget);\n    this.cellEnterListeners.forEach((o) => o.call(null, index));\n  }\n\n  onMouseMove(event) {\n    const cursor = document.querySelector(\".cursor\");\n    cursor.style.left = event.pageX + \"px\";\n    cursor.style.top = event.pageY + \"px\";\n    cursor.setAttribute(\"data-fromTop\", cursor.offsetTop - scrollY);\n  }\n\n  onCellLeave(event) {\n    event.preventDefault();\n    const index = this.cells.indexOf(event.currentTarget);\n    this.cellLeaveListeners.forEach((o) => o.call(null, index));\n  }\n\n  onCellClick(event) {\n    const index = this.cells.indexOf(event.currentTarget);\n    this.cellClickListeners.forEach((o) => o.call(null, index));\n\n    const cursor = document.querySelector(\".cursor\");\n\n    if (cursor.classList.contains(\"click\")) {\n      cursor.classList.remove(\"click\");\n      void cursor.offsetWidth;\n      cursor.classList.add(\"click\");\n    } else {\n      cursor.classList.add(\"click\");\n    }\n  }\n\n  drawScores(scores, pass, skip) {\n    const countScores = this.container.querySelector(\".count-scores\");\n    countScores.textContent = scores;\n    const countPass = this.container.querySelector(\".count-pass\");\n    countPass.textContent = pass;\n    const countSkip = this.container.querySelector(\".count-skip\");\n    countSkip.textContent = skip;\n  }\n\n  showMessage(message) {\n    alert(message);\n  }\n  \n  getContainer(){\n    return document.querySelector(\"#game-container\");\n  }\n}","export default class GameController {\n  constructor(gamePlay, gameState) {\n    this.gamePlay = gamePlay;\n    this.gameState = gameState;\n  }\n\n  init() {\n    this.gamePlay.bindToDOM(this.gamePlay.getContainer());\n    this.gamePlay.drawUi();\n    this.gamePlay.addCellEnterListener(this.onCellEnter.bind(this));\n    this.gamePlay.addCellClickListener(this.onCellClick.bind(this));\n    this.gamePlay.addCellLeaveListener(this.onCellLeave.bind(this));\n\n    this.runInterval();\n  }\n\n  runInterval() {\n    setInterval(() => {\n      if(!this.gameState.isSkip) {\n        this.gameState.skip++;\n        if (this.gameState.skip == 5) {\n          this.gamePlay.showMessage(\"Вы проиграли!\");\n          this.gameState.clearScores();\n        }\n        this.gamePlay.drawScores(this.gameState.scores, this.gameState.pass, this.gameState.skip);\n      }\n      this.gameState.isSkip = false;\n      this.gamePlay.draw();\n    }, 1000);\n  }\n\n  onCellClick(index) {\n    this.gameState.isSkip = true;\n    if (this.gamePlay.cells[index].classList.contains(\"goblin\")) {\n        this.gameState.scores++;\n    } else {\n        this.gameState.pass++;\n    }\n    this.gamePlay.drawScores(this.gameState.scores, this.gameState.pass, this.gameState.skip);\n    \n    if (this.gameState.scores == 10) {\n      this.gamePlay.showMessage(\"Вы победили!\");\n      this.gameState.clearScores();\n    }\n\n    if(this.gameState.pass == 5) {\n      this.gamePlay.showMessage(\"Вы проиграли!\");\n      this.gameState.clearScores();\n    }\n    \n  }\n\n  onCellEnter(index) {\n    \n  }\n\n  onCellLeave(index) {\n  }\n}","export default class GameState {\n  constructor() {\n    this.scores = 0;\n    this.pass = 0;\n    this.skip = 0;\n    this.isSkip = false;\n  }\n\n  clearScores() {\n    this.scores = 0;\n    this.pass = 0; \n    this.skip = 0;\n  }\n}","import GamePlay from \"./GamePlay\";\nimport GameController from \"./GameController\";\nimport GameState from \"./GameState\";\n\nconst gamePlay = new GamePlay();\nconst gameState = new GameState();\nconst gameCntrl = new GameController(gamePlay, gameState);\n\ngameCntrl.init();\n","import \"./css/style.css\";\nimport \"./js/app\";\n"],"names":["cellsGenerator","count","Math","floor","random","GamePlay","constructor","boardSize","container","boardEl","cells","cellClickListeners","cellEnterListeners","cellLeaveListeners","bindToDOM","HTMLElement","Error","drawUi","innerHTML","querySelector","i","cellEl","document","createElement","classList","add","addEventListener","event","onCellEnter","onCellLeave","onCellClick","onMouseMove","appendChild","Array","from","children","draw","length","remove","addCellEnterListener","callback","push","addCellLeaveListener","addCellClickListener","preventDefault","index","indexOf","currentTarget","forEach","o","call","cursor","style","left","pageX","top","pageY","setAttribute","offsetTop","scrollY","contains","offsetWidth","drawScores","scores","pass","skip","countScores","textContent","countPass","countSkip","showMessage","message","alert","getContainer","GameController","gamePlay","gameState","init","bind","runInterval","setInterval","isSkip","clearScores","GameState","gameCntrl"],"sourceRoot":""}